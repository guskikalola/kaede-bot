<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tools/replyInteraction.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tools/replyInteraction.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { Console } = require('console');
var FormData = require('form-data');
const { Readable } = require('stream');

/**
 * Function used to reply to interaction events
 *
 * @param interaction
 * @param {Object} post Interaction response post configuration
 * @param {Number} [post[].type = 1] Type of response
 * @param {Object} post[].image[] Response image
 * @param {String} post[].image[].name Image name
 * @param {Buffer} post[].image[].buffer Image content buffer
 * @param {Boolean} [post[].tts = false] If response content is tts
 * @param {String} [post[].content = ""] Response message content
 * @param {Array} [post[].embeds = []] Response message's embeds
 * @param {Array} [post[].allowed_mentions = []] Response message's allowed mentions
 * 
 */

async function replyInteraction(interaction, post) {
	var postData = {
		"type": post.type || 1,
		"data": {
			"tts": post.tts || false,
			"content": post.content || "",
			"embeds": post.embeds || [],
			"allowed_mentions": post.allowed_mentions || []
		}
	}

	var response;
	var url = "https://discord.com/api/v8/webhooks/" + client.user.id + "/" + interaction.token;
	if (post.type == "image") {
		var form = new FormData();
		form.append("content", post.content);
		form.append("file", post.image.buffer, { header: '\r\n' + '--' + form.getBoundary() + '\r\n' + `Content-Disposition: attachment; filename="${post.image.name}` + '\r\n' + '\r\n'});
		form.submit(url, (err, res) => {
			if (err) throw err; 
		});
	} else {
		response = fetch(url, {
			"method": "POST",
			"body": JSON.stringify(postData.data),
			"headers": {
				"Authorization": "Bot " + process.env.TOKEN,
				"Content-Type": "application/json"
			}
		});
	}
}

module.exports = replyInteraction;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Commands.html">Commands</a></li></ul><h3>Classes</h3><ul><li><a href="module-Commands-CommandsModule.html">CommandsModule</a></li></ul><h3>Global</h3><ul><li><a href="global.html#findCommand">findCommand</a></li><li><a href="global.html#getDoujin">getDoujin</a></li><li><a href="global.html#postSlashCommand">postSlashCommand</a></li><li><a href="global.html#replyInteraction">replyInteraction</a></li><li><a href="global.html#runCommand">runCommand</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Feb 21 2021 16:48:12 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
